{
  "filename": "startup-configuration.md",
  "__html": "<h1>启动配置项</h1>\n<h2>配置方式</h2>\n<p>Sentinel 提供如下的配置方式：</p>\n<ul>\n<li>JVM -D 参数方式</li>\n<li>properties 文件方式（1.7.0 版本开始支持）</li>\n</ul>\n<p>其中，<code>project.name</code> 参数只能通过 JVM -D 参数方式配置，其它参数支持所有的配置方式。</p>\n<p><strong>优先级顺序</strong>：JVM -D 参数的优先级最高。若 properties 和 JVM 参数中有相同项的配置，以 JVM 参数配置的为准。</p>\n<p>用户可以通过 <code>-Dcsp.sentinel.config.file</code> 参数配置 properties 文件的路径，支持 classpath 路径配置（如 <code>classpath:sentinel.properties</code>）。默认 Sentinel 会尝试从 <code>classpath:sentinel.properties</code> 文件读取配置，读取编码默认为 UTF-8。</p>\n<blockquote>\n<p>注：1.7.0 以下版本可以通过 <code>${user_home}/logs/csp/${project.name}.properties</code> 配置文件进行配置（除 <code>project.name</code> 和日志相关配置项）。</p>\n</blockquote>\n<blockquote>\n<p>注：若您的应用为 Spring Boot 或 Spring Cloud 应用，您可以使用 <a href=\"https://github.com/alibaba/spring-cloud-alibaba\">Spring Cloud Alibaba</a>，通过 Spring 配置文件来指定配置，详情请参考 <a href=\"https://github.com/alibaba/spring-cloud-alibaba/wiki/Sentinel\">Spring Cloud Alibaba Sentinel 文档</a>。</p>\n</blockquote>\n<h2>配置项列表</h2>\n<h3>sentinel-core 的配置项</h3>\n<h4>基础配置项</h4>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>含义</th>\n<th>类型</th>\n<th>默认值</th>\n<th>是否必需</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>project.name</code></td>\n<td>指定应用的名称</td>\n<td><code>String</code></td>\n<td><code>null</code></td>\n<td>否</td>\n<td></td>\n</tr>\n<tr>\n<td><code>csp.sentinel.app.type</code></td>\n<td>指定应用的类型</td>\n<td><code>int</code></td>\n<td>0 (<code>APP_TYPE_COMMON</code>)</td>\n<td>否</td>\n<td>1.6.0 引入</td>\n</tr>\n<tr>\n<td><code>csp.sentinel.metric.file.single.size</code></td>\n<td>单个监控日志文件的大小</td>\n<td><code>long</code></td>\n<td>52428800 (50MB)</td>\n<td>否</td>\n<td></td>\n</tr>\n<tr>\n<td><code>csp.sentinel.metric.file.total.count</code></td>\n<td>监控日志文件的总数上限</td>\n<td><code>int</code></td>\n<td>6</td>\n<td>否</td>\n<td></td>\n</tr>\n<tr>\n<td><code>csp.sentinel.statistic.max.rt</code></td>\n<td>最大的有效响应时长（ms），超出此值则按照此值记录</td>\n<td><code>int</code></td>\n<td>4900</td>\n<td>否</td>\n<td>1.4.1 引入</td>\n</tr>\n<tr>\n<td><code>csp.sentinel.spi.classloader</code></td>\n<td>SPI 加载时使用的 ClassLoader，默认为给定类的 ClassLoader</td>\n<td><code>String</code></td>\n<td><code>default</code></td>\n<td>否</td>\n<td>若配置 <code>context</code> 则使用 thread context ClassLoader。1.7.0 引入</td>\n</tr>\n</tbody>\n</table>\n<p>其中 <code>project.name</code> 项用于指定应用名（appName）。若未指定，则默认解析 main 函数的类名作为应用名。<strong>实际项目使用中建议手动指定应用名</strong>。</p>\n<h4>日志相关配置项</h4>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>含义</th>\n<th>类型</th>\n<th>默认值</th>\n<th>是否必需</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>csp.sentinel.log.dir</code></td>\n<td>Sentinel 日志文件目录</td>\n<td><code>String</code></td>\n<td><code>${user.home}/logs/csp/</code></td>\n<td>否</td>\n<td>1.3.0 引入</td>\n</tr>\n<tr>\n<td><code>csp.sentinel.log.use.pid</code></td>\n<td>日志文件名中是否加入进程号，用于单机部署多个应用的情况</td>\n<td><code>boolean</code></td>\n<td><code>false</code></td>\n<td>否</td>\n<td>1.3.0 引入</td>\n</tr>\n<tr>\n<td><code>csp.sentinel.log.output.type</code></td>\n<td>Record 日志输出的类型，<code>file</code> 代表输出至文件，<code>console</code> 代表输出至终端</td>\n<td><code>String</code></td>\n<td><code>file</code></td>\n<td>否</td>\n<td>1.6.2 引入</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p><strong>注意</strong>：若需要在单台机器上运行相同服务的多个实例，则需要加入 <code>-Dcsp.sentinel.log.use.pid=true</code> 来保证不同实例日志的独立性。</p>\n</blockquote>\n<h3>sentinel-transport-common 的配置项</h3>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>含义</th>\n<th>类型</th>\n<th>默认值</th>\n<th>是否必需</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>csp.sentinel.dashboard.server</code></td>\n<td>控制台的地址，指定控制台后客户端会自动向该地址发送心跳包。地址格式为：<code>hostIp:port</code></td>\n<td><code>String</code></td>\n<td><code>null</code></td>\n<td>是</td>\n</tr>\n<tr>\n<td><code>csp.sentinel.heartbeat.interval.ms</code></td>\n<td>心跳包发送周期，单位毫秒</td>\n<td><code>long</code></td>\n<td><code>null</code></td>\n<td>非必需，若不进行配置，则会从相应的 <code>HeartbeatSender</code> 中提取默认值</td>\n</tr>\n<tr>\n<td><code>csp.sentinel.api.port</code></td>\n<td>本地启动 HTTP API Server 的端口号</td>\n<td><code>int</code></td>\n<td>8719</td>\n<td>否</td>\n</tr>\n<tr>\n<td><code>csp.sentinel.heartbeat.client.ip</code></td>\n<td>指定心跳包中本机的 IP</td>\n<td><code>String</code></td>\n<td>-</td>\n<td>若不指定则通过 <code>HostNameUtil</code> 解析；该配置项多用于多网卡环境</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>注：<code>csp.sentinel.api.port</code> 可不提供，默认为 8719，若端口冲突会自动向下探测可用的端口。</p>\n</blockquote>\n"
}